# モデル選定と料金ガイド（2025-10-21 時点・要更新）

このドキュメントは、本サービスで表示する「API消費量/料金」の算出に関わるモデル選定と単価の管理方法をまとめたものです。実料金は常に変動するため、最新の公式情報で必ず更新・確認してください。

重要: ここに記載の単価は参考値です。必ず公式価格表の最新情報で上書きしてください。

---

## 1. 主なモデル（カテゴリ別）

- GPT-5 系（現行主力・詳細は要確認）
  - 例: gpt-5, gpt-5-mini など（実際の型番/名称は公式を要確認）
  - 特徴: 最新世代。精度/マルチモーダル/速度のバランスが主力想定
  - 料金: 要確認（本ドキュメントでは未設定）

- GPT-4.x 系（引き続き利用ニーズあり）
  - gpt-4.1, gpt-4.1-mini
  - gpt-4o, gpt-4o-mini
  - 特徴: 実績と安定性。多くの既存ワークロードで実運用

- o 系（推論最適化）
  - o3, o3-mini
  - 特徴: コスト/速度に最適化された世代

---

## 2. 参考料金（暫定・USD/トークン）

> 参考の初期値。必ず最新情報に置き換えてください。

| モデル            | 入力単価(USD/token) | 出力単価(USD/token) | 用途目安 |
|-------------------|---------------------:|----------------------:|----------|
| gpt-4o-mini       | 0.00000015           | 0.00000060            | 高頻度/軽量 |
| gpt-4o            | 0.00000250           | 0.00001000            | 高品質汎用 |
| gpt-4.1-mini      | 0.00000015           | 0.00000060            | 軽量4.1系 |
| gpt-4.1           | 0.00000300           | 0.00001500            | 高品質4.1系 |
| o3-mini           | 0.00000060           | 0.00000240            | 低コスト重視 |
| o3                | 0.00000300           | 0.00001500            | バランス |
| gpt-5 / 5-mini    | 要確認               | 要確認                | 最新世代 |

JPY換算の例: 本サービスでは 1 USD = 150 JPY（固定換算、コード内で変更可）

---

## 3. 本サービスでのモデル選択/単価反映の仕組み

- フロント（レビュー画面ヘッダー）に「モデル」セレクトを設置
  - 保存キー: `jsonld_model_blog_reviewer`
  - 選択即時に単価切替 -> ヘッダーの「本回/累計」および最下部の料金パネルを再計算
- サーバー側が使用したモデル名をSSEで先送信
  - 受信時に自動でセレクト・単価へ反映（ユーザ選択 > 自動推定の優先度は要件に合わせて調整可）

---

## 4. 料金テーブル更新手順

1) 単価定義の更新（フロント）
   - ファイル: `public/modules/blog-reviewer.js`
   - 関数: `getModelPricing(model)`
   - ここで対象モデルの `input` / `output` 単価（USD/token）を更新

2) セレクト候補の更新（必要時）
   - 同ファイルのレビュー画面ヘッダー内 `<select id="blogReviewerModelSelect">` の候補を追加/削除

3) デフォルトモデルの変更（必要時）
   - `getSelectedModel()` の既定値、または `localStorage` の値を調整
   - サーバーの既定モデルは環境変数 `OPENAI_MODEL`（`server.js` / API内参照）

---

## 5. モデル自動判定（拡張案）

- すでに API からは実使用モデル名をSSEで通知
- 追加で「クライアントの選択 > サーバーの実使用名」の優先ロジックや、
  過去実績からの推定、失敗時のフォールバック（mini系へ）などの戦略を設計可能

---

## 6. 注意事項（2025-10-21 時点）

- 本ドキュメントは 2025-10-21 時点の情報をもとに作成しています。
- 料金/ラインナップ/命名は随時変動します。必ず最新の公式ドキュメントで確認のうえ更新してください。
- 表の単価は参考値です。運用前に必ず正確な単価で差し替えてください。
