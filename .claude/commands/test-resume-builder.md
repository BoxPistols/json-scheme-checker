# レジュメビルダーの包括的テスト

レジュメビルダー機能の包括的なテストを実行します。

## テスト手順

### 1. 開発サーバーの起動確認

まず、開発サーバーが起動しているか確認します。起動していない場合は起動してください。

```bash
# ヘルスチェック
curl -f http://localhost:3333/health || echo "サーバーが起動していません。pnpm dev を実行してください。"
```

### 2. 隠しモード機能のテスト

以下のURLで隠しモード機能が正しく動作することを確認してください：

#### テストケース1: 通常アクセス

- **URL**: `http://localhost:3333/`
- **期待される動作**: レジュメビルダーボタンが非表示

#### テストケース2: user=resume

- **URL**: `http://localhost:3333/?user=resume`
- **期待される動作**: レジュメビルダーボタンのみ表示

#### テストケース3: 無効なパラメータ

- **URL**: `http://localhost:3333/?user=invalid`
- **期待される動作**: レジュメビルダーボタンが非表示

### 3. モーダル表示テスト

`http://localhost:3333/?user=resume` にアクセスして、以下を確認してください：

- [ ] 「レジュメビルダー」ボタンが表示される
- [ ] ボタンをクリックするとモーダルが開く
- [ ] モーダルがフルスクリーンで表示される
- [ ] ヘッダーに「レジュメビルダー Beta」と表示される
- [ ] 情報ボックスが表示される
- [ ] チャットエリアが表示される
- [ ] 入力エリアが表示される

### 4. AI対話テスト

モーダル内で以下を確認してください：

- [ ] AIの最初の質問が自動的に表示される
- [ ] 質問がチャット形式で左側に表示される
- [ ] テキスト入力欄が表示される
- [ ] 「送信」ボタンが表示される
- [ ] 「新規作成」ボタンが表示される

#### テスト手順:

1. 入力欄に「Webアプリケーション開発プロジェクト」と入力
2. 「送信」ボタンをクリック
3. ユーザーメッセージが右側に表示されることを確認
4. AIの応答が左側にストリーミング表示されることを確認
5. スピナーが表示されることを確認
6. 応答が完全に表示されることを確認

### 5. 質問フローテスト

以下の6つの質問に順番に回答し、プロジェクト経験の文章が生成されることを確認してください：

1. **プロジェクト概要**: 「ECサイトのリニューアルプロジェクト」
2. **プロジェクト体制**: 「5名のチームで、私はフロントエンド担当」
3. **背景・課題**: 「既存サイトのパフォーマンスが悪く、ユーザー離脱率が高かった」
4. **取り組み内容**: 「React導入、画像最適化、CDN活用」
5. **成果・結果**: 「ページ読み込み速度が50%改善、コンバージョン率が20%向上」
6. **使用技術**: 「React, TypeScript, Next.js, Vercel」

#### 期待される動作:

- [ ] すべての質問に順番に回答できる
- [ ] AIが適切な追加質問をする（回答が短い場合）
- [ ] 最後にプロジェクト経験の文章が生成される
- [ ] 文章がMarkdown形式で表示される
- [ ] 文章に以下のセクションが含まれる:
  - プロジェクト概要
  - プロジェクト体制と役割
  - 背景・課題
  - 取り組み内容
  - 成果・結果
  - 使用技術

### 6. エクスポート機能テスト

プロジェクト経験の文章が生成された後、以下を確認してください：

- [ ] 「コピー」ボタンが表示される
- [ ] 「ダウンロード」ボタンが表示される
- [ ] コピーボタンをクリックするとクリップボードにコピーされる
- [ ] 成功メッセージが表示される
- [ ] ダウンロードボタンをクリックするとファイルがダウンロードされる
- [ ] ファイル名が `プロジェクト経験_YYYY-MM-DD.md` 形式である
- [ ] ダウンロードしたファイルの内容が正しい

### 7. 新規作成機能テスト

- [ ] 「新規作成」ボタンをクリック
- [ ] 確認ダイアログが表示される
- [ ] 「OK」をクリックすると会話がクリアされる
- [ ] 入力欄がクリアされる
- [ ] AIの最初の質問が再度表示される

### 8. エラーハンドリングテスト

#### テストケース1: 空のメッセージ送信

- 入力欄を空のまま「送信」ボタンをクリック
- **期待される動作**: エラーメッセージ「メッセージを入力してください」が表示される

#### テストケース2: ネットワークエラー（シミュレーション）

- ブラウザの開発者ツールでネットワークをオフラインに設定
- メッセージを送信
- **期待される動作**: 接続エラーメッセージが表示される

### 9. モバイルフレンドリーテスト

ブラウザの開発者ツールでモバイル表示に切り替え、以下を確認してください：

#### iPhone 12 Pro (390x844)

- [ ] モーダルが画面に収まる
- [ ] チャットメッセージが読みやすい
- [ ] 入力エリアが画面下部に固定される
- [ ] ボタンがタップしやすいサイズ
- [ ] スクロールがスムーズ
- [ ] キーボード表示時にレイアウトが崩れない

#### iPad (768x1024)

- [ ] モーダルが適切なサイズで表示される
- [ ] チャットメッセージが読みやすい
- [ ] 入力エリアが適切に表示される

#### Android スマートフォン (360x640)

- [ ] モーダルが画面に収まる
- [ ] チャットメッセージが読みやすい
- [ ] 入力エリアが適切に表示される

### 10. パフォーマンステスト

ブラウザの開発者ツールのパフォーマンスタブで以下を確認してください：

- [ ] ページ読み込み時間が3秒以内
- [ ] チャットメッセージのレンダリングが滑らか（60fps）
- [ ] メモリ使用量が適切（100MB以下）
- [ ] CPU使用率が適切（50%以下）

### 11. ブラウザ互換性テスト

以下のブラウザで動作確認してください：

- [ ] Chrome (最新版)
- [ ] Firefox (最新版)
- [ ] Safari (最新版)
- [ ] Edge (最新版)

### 12. レート制限テスト

**注意**: このテストはローカルストレージをクリアする前に実行してください。

1. レート制限をテストするために、50回連続でメッセージを送信するスクリプトを実行
2. 51回目のメッセージ送信を試みる
3. **期待される動作**:
   - 50回まで正常に送信できる
   - 51回目でレート制限エラーが表示される
   - リセット時刻が表示される

## テスト完了チェックリスト

すべてのテストケースにチェックを入れ、問題があれば報告してください。

- [ ] 隠しモード機能のテスト
- [ ] モーダル表示テスト
- [ ] AI対話テスト
- [ ] 質問フローテスト
- [ ] エクスポート機能テスト
- [ ] 新規作成機能テスト
- [ ] エラーハンドリングテスト
- [ ] モバイルフレンドリーテスト
- [ ] パフォーマンステスト
- [ ] ブラウザ互換性テスト
- [ ] レート制限テスト

## 問題が見つかった場合

問題が見つかった場合は、以下の情報を記録してください：

1. **問題の説明**: 何が期待通りに動作しなかったか
2. **再現手順**: 問題を再現するための手順
3. **期待される動作**: 本来どのように動作すべきか
4. **実際の動作**: 実際にどのように動作したか
5. **ブラウザ・OS情報**: 使用したブラウザとOSのバージョン
6. **スクリーンショット**: 問題の画面をキャプチャ
7. **コンソールログ**: ブラウザコンソールのエラーメッセージ
