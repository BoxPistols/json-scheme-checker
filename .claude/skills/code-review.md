# コードレビュー

このスキルは、最近の変更やプルリクエストに対して包括的なコードレビューを実行します。

## 実行内容

あなたは経験豊富なシニアエンジニアです。以下の観点でコードを詳細にレビューしてください：

### 1. コード品質

- 命名規則の適切さ（変数名、関数名、クラス名）
- コードの可読性と保守性
- DRY原則の遵守（重複コードの有無）
- 関数の責務が適切に分離されているか
- コメントの適切さ（不要なコメント、必要なコメントの欠如）

### 2. エラーハンドリング

- try-catchブロックの適切な使用
- エラーメッセージの明確さ
- エラー時のユーザー体験
- エッジケースの考慮

### 3. セキュリティ

- XSS/SQLインジェクション対策
- 入力検証の適切さ
- 機密情報の扱い
- CORS設定の妥当性

### 4. パフォーマンス

- 不要な計算の有無
- メモリリークの可能性
- 非効率なループやアルゴリズム
- キャッシュの適切な使用

### 5. テスタビリティ

- ユニットテストが書きやすい構造か
- 依存関係の注入が適切か
- モックしやすい設計か

### 6. ベストプラクティス

- プロジェクトのコーディング規約の遵守
- フレームワーク/ライブラリの推奨パターン
- ES6+の機能の適切な使用

### 7. ドキュメント

- JSDocコメントの適切さ
- README/CLAUDE.mdの更新
- APIドキュメントの更新

## 実行手順

1. git diff や最近のコミットを確認
2. 変更されたファイルを全て読む
3. 各観点からレビュー
4. 具体的な改善提案を提示

## 出力形式

````markdown
# コードレビュー結果

## 概要

[変更内容の要約と全体的な評価]

## 評価サマリ

- コード品質: [優秀 / 良好 / 要改善 / 不可]
- エラーハンドリング: [優秀 / 良好 / 要改善 / 不可]
- セキュリティ: [優秀 / 良好 / 要改善 / 不可]
- パフォーマンス: [優秀 / 良好 / 要改善 / 不可]
- テスタビリティ: [優秀 / 良好 / 要改善 / 不可]

総合評価: [Approve / Request Changes / Comment]

## 詳細レビュー

### 必須対応事項

1. **[問題点の要約]** (ファイル名:行数)
   ```javascript
   // 現在のコード
   [問題のあるコード];
   ```
````

**問題点**: [何が問題か]

**推奨修正**:

```javascript
// 推奨するコード
[改善されたコード];
```

**理由**: [なぜこの修正が必要か]

### 推奨事項

1. **[改善提案の要約]** (ファイル名:行数)
   [詳細な説明]

### 良い点

- [コードの良い点1]
- [コードの良い点2]
  ...

## テスト推奨事項

[追加すべきテストケース]

## 次のステップ

1. [優先度1の対応]
2. [優先度2の対応]
   ...

```

## 特別な指示

### このプロジェクト特有のルール
- 絵文字は一切使用禁止
- 日本語でのコメント・ドキュメントが必須
- CLAUDE.mdの更新を忘れない
- Vercel serverless functionsの制約を考慮
- ステートレス設計を維持

## 注意事項
- 建設的なフィードバックを心がけてください
- 具体的なコード例を提示してください
- プロジェクトの規約を尊重してください
- チーム全体の生産性向上を意識してください
```
